<div id="events-container" layout="row">

    <!-- Event list -->
    <md-list id="events-list" layout-align="center start">

        <!-- Create button for new Event -->
        <md-button class="md-raised md-accent"
                   ng-click="showCreateDialog()"
                   ng-if="isAuthed()">
            Create new event!
        </md-button>

        <md-subheader class="md-no-sticky">Events list</md-subheader>

        <!-- Sort events by newest/oldest first -->
        Sort events by:<br />
        <md-radio-group ng-model="event.eventSortOption"
                        ng-change="event.eventSortChange()"
                        layout="row">

            <md-radio-button value="Newest">Newest first</md-radio-button>
            <md-radio-button value="Oldest">Oldest first</md-radio-button>
        </md-radio-group>

        <!-- List ALL Events -->
        <md-list-item ng-repeat="event in events"
                      ng-click="showEvent(event)">

            <!-- Edit button/icon for Event -->
            <md-icon class="md-secondary"
                     ng-if="isAuthed() && belongsToCurrentUser(event)"
                     ng-click="showEditDialog(event)"
                     aria-label="Edit event"
                     md-svg-icon="editIcon">

                <!-- Shown when hover over icon -->
                <md-tooltip md-direction="top">
                    Edit event
                </md-tooltip>
            </md-icon>

            <!-- Delete button/icon for Event -->
            <md-icon class="md-secondary"
                     ng-if="isAuthed() && belongsToCurrentUser(event)"
                     ng-click="showDeleteDialog(event)"
                     aria-label="Delete event"
                     md-svg-icon="deleteIcon">

                <!-- Shown when hover over icon -->
                <md-tooltip md-direction="top">
                    Delete event
                </md-tooltip>
            </md-icon>

            <div class="event-child">
                {{ event.id }} |
                {{ event.category }} |
                {{event.creator.name}}'s
            </div>

        </md-list-item>
    </md-list>
</div>

<div layout="column">

    <!-- Google Map -->
    <ng-map center="sweden"
            zoom="6"
            id="main-map">

        <marker ng-repeat="ev in events"
                position="{{ev.position.address}}">
        </marker>
    </ng-map>

    <!-- Search Methods Field -->
    <div id="choose-search-method"
         class="search-methods" flex>

        <h1 class="md-headline" id="search-methods-topic">
            Search events by a specific method
        </h1>

        <md-input-container>
            <label>Search methods</label>

            <md-select ng-model="selectedMethod"
                       md-selected-text="getSelectedMethod()">

                <md-optgroup label="methods">

                    <md-option ng-value="method"
                               ng-repeat="method in searchMethods">
                        {{method}}
                    </md-option>
                </md-optgroup>
            </md-select>
        </md-input-container>
    </div>

    <!-- TODO: Implement error handling for all search methods. -->
    <!-- SEARCH METHODS PARTIALS -->

    <!-- Search Nearby Events -->
    <div ng-include src="'partials/search-methods/nearby.html'"
         ng-if="selectedMethod.includes('nearby')"></div>

    <!-- Search Events by Tags -->
    <div ng-include src="'partials/search-methods/tags.html'"
         ng-if="selectedMethod.includes('tags')"></div>

    <!-- Search Events by Params -->
    <div ng-include src="'partials/search-methods/params.html'"
         ng-if="selectedMethod.includes('parameters')"></div>

</div>