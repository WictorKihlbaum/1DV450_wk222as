<div id="events-container" layout="row">

    <!-- Event list -->
    <md-list id="events-list" layout-align="center start">

        <!-- Create button for new Event -->
        <md-button class="md-raised md-accent"
                   ng-click="showCreateDialog()"
                   ng-if="isAuthed()">
            Create new event!
        </md-button>

        <md-subheader class="md-no-sticky">Events list</md-subheader>

        <!-- List ALL Events -->
        <md-list-item ng-repeat="event in events"
                      ng-click="showEvent(event)">

            <!-- Edit button/icon for Event -->
            <md-icon class="md-secondary"
                     ng-if="isAuthed() && belongsToCurrentUser(event)"
                     ng-click="showEditDialog(event)"
                     aria-label="Edit event"
                     md-svg-icon="editIcon">

                <!-- Shown when hover over icon -->
                <md-tooltip md-direction="top">
                    Edit event
                </md-tooltip>

            </md-icon>

            <!-- Delete button/icon for Event -->
            <md-icon class="md-secondary"
                     ng-if="isAuthed() && belongsToCurrentUser(event)"
                     ng-click="showDeleteDialog(event)"
                     aria-label="Delete event"
                     md-svg-icon="deleteIcon">

                <!-- Shown when hover over icon -->
                <md-tooltip md-direction="top">
                    Delete event
                </md-tooltip>

            </md-icon>

            <div class="event-child">
                {{ event.id }} | {{ event.category }}
            </div>

        </md-list-item>

    </md-list>

</div>

<div layout="column">


    <!-- Google Map -->
    <ng-map center="sweden" zoom="6" id="main-map">
        <marker ng-repeat="ev in events"
                position="{{ev.position.address}}"></marker>
    </ng-map>


    <!-- TODO: Implement error handling for all search methods. -->

    <!-- Search Methods Field -->
    <div flex id="choose-search-method" class="search-methods">
        <h1 class="md-headline" id="search-methods-topic">Search events by a specific method</h1>
        <md-input-container>
            <label>Search methods</label>
            <md-select ng-model="selectedMethod" md-selected-text="getSelectedMethod()">
                <md-optgroup label="methods">
                    <md-option ng-value="method" ng-repeat="method in searchMethods">{{method}}</md-option>
                </md-optgroup>
            </md-select>
        </md-input-container>
    </div>

    <!-- Search Nearby places -->

    <div flex id="search-nearby-places"
         class="search-methods"
         ng-if="selectedMethod.includes('nearby')">

        <!-- Choose position input method -->
        <md-radio-group ng-model="positionOption" layout="row">
            <md-radio-button value="Address">Address</md-radio-button>
            <md-radio-button value="Coordinates">Latitude & Longitude</md-radio-button>
        </md-radio-group>

        <!-- Address input field -->
        <md-input-container ng-if="positionOption =='Address'">
            <label>Address</label>
            <input type="text"
                   name="addressField"
                   aria-label="Fill in address"
                   ng-model="event.address" />
        </md-input-container>

        <div id="coordinates" ng-if="positionOption == 'Coordinates'">
            <!-- Latitude input -->
            <md-input-container>
                <label>Latitude</label>
                <input type="text"
                       name="latitudeField"
                       aria-label="Fill in latitude"
                       ng-model="event.latitude" />
            </md-input-container>

            <!-- Longitude input -->
            <md-input-container>
                <label>Longitude</label>
                <input type="text"
                       name="longitudeField"
                       aria-label="Fill in longitude"
                       ng-model="event.longitude" />
            </md-input-container>
        </div>

        <!-- Search distance -->
        <md-input-container>
            <label>Search distance (Km)</label>
            <input type="text"
                   name="distanceField"
                   aria-label="Fill in distance"
                   ng-model="event.distance" />
        </md-input-container>

        <div>
            <!-- Search button -->
            <md-button class="md-raised md-primary"
                       ng-click="event.getNearbyEvents()">Search</md-button>
        </div>

    </div>


    <!-- Search by Tags -->

    <div flex id="search-by-tags"
         class="search-methods"
         ng-if="selectedMethod.includes('tags')">
        Search by tags :D
    </div>


    <!-- Param search -->

    <div flex id="search-by-params"
         class="search-methods"
         ng-if="selectedMethod.includes('parameters')">

        <h4 id="param-search-topic">
            Choose the parameter(s) you want to include in your search
        </h4>

        <!-- Checkboxes for Params -->
        <div>
            <md-checkbox ng-model="creatorCB" aria-label="Creator checkbox">
                Creator
            </md-checkbox>

            <md-checkbox ng-model="categoryCB" aria-label="Category checkbox">
                Category
            </md-checkbox>

            <md-checkbox ng-model="locationCB" aria-label="Location checkbox">
                Location
            </md-checkbox>
        </div>

        <!-- Creator Param Dropdownlist -->
        <md-input-container ng-if="creatorCB" class="md-block" flex-gt-sm>
            <label>Creator</label>
            <md-select ng-model="event.creatorParam">
                <md-option ng-repeat="creator in creators" value="{{creator.id}}">
                    {{creator.name}}
                </md-option>
            </md-select>
        </md-input-container>

        <!-- Category Param Dropdownlist -->
        <md-input-container ng-if="categoryCB" class="md-block" flex-gt-sm>
            <label>Category</label>
            <md-select ng-model="event.categoryParam">
                <md-option ng-repeat="category in categories" value="{{category}}">
                    {{category}}
                </md-option>
            </md-select>
        </md-input-container>

        <!-- Position Param Dropdownlist-->
        <md-input-container ng-if="locationCB" class="md-block" flex-gt-sm>
            <label>Location</label>
            <md-select ng-model="event.locationParam">
                <md-option ng-repeat="location in locations" value="{{location.id}}">
                    {{location.address}}
                </md-option>
            </md-select>
        </md-input-container>

        <!-- Search button -->
        <md-button class="md-raised md-primary" ng-click="event.getEventsByParams()">
            Search
        </md-button>

    </div>

</div>